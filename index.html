<!DOCTYPE html>
<html>
  <head>
    <title>Immobilien Investment Calculator</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico">
    <!-- Plotly packages -->
    <script src='https://cdn.plot.ly/plotly-2.31.1.min.js'></script>
    <!-- Bootstrap 5 stylesheet -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap 5 JS packages -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- JS-cookie -->
    <script type="module" src="https://cdn.jsdelivr.net/npm/js-cookie@3.0.5/dist/js.cookie.min.js"></script>
    <!-- Main JS packages -->
    <script type="module" src="static/main.js"></script>
  </head>
  <body class="bg-dark text-white">

    <nav class="navbar navbar-expand-lg bg-success navbar-success fixed-top" style="min-height: 5vh">
      <div class="container-fluid">
        <div class="navbar-brand">Immobilieninvestitionsrechner</div>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar_selection">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbar_selection">
          <ul class="navbar-nav me-auto" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" data-bs-toggle="tab" href="#rendite_pro_eigenkapital" onclick='prepare_rendite_pro_eigenkapital()'>Rendite pro Eigenkapitalanteil</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-bs-toggle="tab" href="#einzelfallrechner" onclick='prepare_einzelfallrechner()'>Einzellfall Renditerechner</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-bs-toggle="tab" href="#darlehensrechner" onclick='prepare_darlehensrechner()'>Annuitätendarlehensrechner</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-bs-toggle="tab" href="#sollzinsverlauf" onclick='prepare_sollzinsverlauf()'>Sollzinsverlauf</a>
            </li>
          </ul>
        </div> <!-- navbar_selection -->
      </div>
    </nav>

    <div class="container pt-5" style="min-height: 80vh">
      <div id="outer_content_container" class="container" >

        <div class="tab-content">
          <div id="rendite_pro_eigenkapital" class="container tab-pane active"><br>
            <h3>Variable Nettorendite pro eingesetztem Eigenkapital</h3>

            <form name="rendite_pro_eigenkapital_form" onsubmit="compute_rendite_pro_eigenkapital()" method="post">
              <div class="row">
                <div class="col-sm-8">
                  <label for="netto_kaufpreis">Netto Kaufpreis:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="netto_kaufpreis" name="netto_kaufpreis" min="0" required="true" oninput="update_rendite_pro_eigenkapital()"> €
                </div>

                <div class="col-sm-8">
                  <label for="zusätzliche_modernisierungskosten">Zusätzliche Modernisierungskosten:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="zusätzliche_modernisierungskosten" name="zusätzliche_modernisierungskosten" min="0" oninput="update_rendite_pro_eigenkapital()"> €
                </div>

                <div class="col-sm-8">
                  <label for="erwartete_jahreskaltsmiete">Erwartete Jahreskaltsmiete:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="erwartete_jahreskaltsmiete" name="erwartete_jahreskaltsmiete" min="0" required="true" oninput="update_rendite_pro_eigenkapital()"> €
                </div>

                <div class="col-sm-8">
                  <label for="wohnfläche">Wohnfläche:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="wohnfläche" name="wohnfläche" min="0" required="true" oninput="update_rendite_pro_eigenkapital()"> m<sup>2</sup>
                </div>

                <div class="col-sm-8">
                  <label for="baujahr">Baujahr:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="baujahr" name="baujahr" min="0" oninput="update_rendite_pro_eigenkapital()">
                </div>

                <div class="col-sm-4">
                  <label for="laufende_kosten_pro_jahr">Laufende Kosten pro Jahr:</label>
                </div>
                <div class="col-sm-4">
                  <input type="checkbox" id="set_default_laufende_kosten_pro_jahr" name="set_default_laufende_kosten_pro_jahr" onchange="update_rendite_pro_eigenkapital()">
                  <label for="set_default_laufende_kosten_pro_jahr">Automatisch füllen</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="laufende_kosten_pro_jahr" name="laufende_kosten_pro_jahr" min="0" oninput="update_rendite_pro_eigenkapital()"> €
                </div>

                <div class="col-sm-8">
                    <label for="finanzierungsdauer_in_jahren">Finanzierungsdauer:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="finanzierungsdauer_in_jahren" name="finanzierungsdauer_in_jahren" min="0" max="50" oninput="update_rendite_pro_eigenkapital()"> Jahre
                </div>

                <div class="col-sm-8">
                  <label for="tilgungsrate_pro_jahr">Tilgungsrate pro Jahr:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="tilgungsrate_pro_jahr" name="tilgungsrate_pro_jahr" min="0" max="100" oninput="update_rendite_pro_eigenkapital()"> %
                </div>

                <div class="col-sm-8">
                  <label for="rücklagen_enthalten_in_kaufpreis">Rücklagen (Enthalten im Kaufpreis):</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="rücklagen_enthalten_in_kaufpreis" name="rücklagen_enthalten_in_kaufpreis" min="0" oninput="update_rendite_pro_eigenkapital()"> €
                </div>

                <div class="col-sm-8">
                  <label for="zusätzliche_enthaltente_werte_in_kaufpreis">Zusätzlich enthaltene Werte im Kaufpreis:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="zusätzliche_enthaltente_werte_in_kaufpreis" name="zusätzliche_enthaltente_werte_in_kaufpreis" min="0" oninput="update_rendite_pro_eigenkapital()"> €
                </div>

                <div class="col-sm-8">
                  <label for="maklercourtage">Maklercourtage:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="maklercourtage" name="maklercourtage" min="0" max="100" step="0.01" oninput="update_rendite_pro_eigenkapital()"> % vom Kaufpreis
                </div>

                <div class="col-sm-8">
                  <label for="notarkosten">Notarkosten:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="notarkosten" name="notarkosten" min="0" max="100" step="0.01" oninput="update_rendite_pro_eigenkapital()"> % vom Kaufpreis
                </div>

                <div class="col-sm-8">
                  <label for="grunderwerbssteuersatz">Grunderwerbssteuersatz:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="grunderwerbssteuersatz" name="grunderwerbssteuersatz" min="0" max="100" step="0.01" oninput="update_rendite_pro_eigenkapital()"> % vom Kaufpreis
                </div>

                <div class="col-sm-4">
                  <label for="grund_und_bodenwert">Grund- und Bodenwert:</label>
                </div>
                <div class="col-sm-4">
                  <input type="checkbox" id="set_default_grund_und_bodenwert" name="set_default_grund_und_bodenwert" onchange="update_rendite_pro_eigenkapital()">
                  <label for="set_default_grund_und_bodenwert">Automatisch füllen</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="grund_und_bodenwert" name="grund_und_bodenwert" min="0" oninput="update_rendite_pro_eigenkapital()"> €
                </div>

                <div class="col-sm-8">
                  <label for="gewerblich_vermietet">Gewerbliche Vermietung:</label>
                </div>
                <div class="col-sm-4">
                  <input type="checkbox" id="gewerblich_vermietet" name="gewerblich_vermietet" onchange="update_rendite_pro_eigenkapital()">
                </div>

                <div class="col-sm-8">
                  <label for="denkmalgeschützt">Denkmalgeschützt:</label>
                </div>
                <div class="col-sm-4">
                  <input type="checkbox" id="denkmalgeschützt" name="denkmalgeschützt" onchange="update_rendite_pro_eigenkapital()">
                </div>

                <div class="col-sm-8">
                  <label for="einkommenssteuersatz">Einkommenssteuersatz:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="einkommenssteuersatz" name="einkommenssteuersatz" min="0" max="100" step="0.01" oninput="update_rendite_pro_eigenkapital()"> %
                </div>

                <div class="col-sm-8">
                  <label for="erwerb_durch_vermögensverwaltende_körperschaft">Erwerb durch vermögensverwaltende Körperschaft (z.B. Stiftung):</label>
                </div>
                <div class="col-sm-4">
                  <input type="checkbox" id="erwerb_durch_vermögensverwaltende_körperschaft" name="erwerb_durch_vermögensverwaltende_körperschaft" onchange="update_rendite_pro_eigenkapital()">
                </div>
              </div>
            </form>
            <button class="btn btn-primary" onclick="compute_rendite_pro_eigenkapital()" style="margin: 20px; margin-bottom: 30px">Start</button>

            <div id='rendite_pro_eigenkapital_result' style="display:none; margin-bottom: 50px">

              <hr>

              <h3>Ergebnis</h3>
              <div id='rendite_div' class="mx-auto d-block" style="max-width: 70vh;"><!-- Plotly chart will be drawn inside this DIV --></div>

              <hr>

              <h3>Details</h3>
              <div id='rendite_pro_eigenkapital_details' class="row">

                <div class="col-sm-4">
                  Renditen-Maximum:
                </div>
                <div class="col-sm-2">
                  <div id='rendite_pro_eigenkapital_rendite_maximum'></div>
                </div>

                <div class="col-sm-4">
                  Eigenkapital zum Maximum:
                </div>
                <div class="col-sm-2">
                  <div id='rendite_pro_eigenkapital_rendite_maximum_eigenkapital'></div>
                </div>

                <div class="col-sm-4">
                  Anschaffungspreis entspricht
                </div>
                <div class="col-sm-2">
                  <div id='rendite_pro_eigenkapital_anschaffungspreis_in_jahreskaltmieten'></div>
                </div>

                <div class="col-sm-4">
                  Restschulden:
                </div>
                <div class="col-sm-2">
                  <div id='rendite_pro_eigenkapital_restschulden'></div>
                </div>

                <div class="col-sm-4">
                  Gesamtanschaffungskosten:
                </div>
                <div class="col-sm-2">
                  <div id='rendite_pro_eigenkapital_gesamtanschaffungskosten'></div>
                </div>

              </div> <!-- rendite_pro_eigenkapital_details -->
            </div> <!-- rendite_pro_eigenkapital_result -->
          </div> <!-- rendite_pro_eigenkapital -->

          <div id="einzelfallrechner" class="container tab-pane"><br>
            <h3>Zeitlicher Verlauf für vorgegebenes Eigenkapital</h3>

            <form name="einzelfallrechner_form" onsubmit="compute_einzelfall()" method="post">
              <div class="row">
                <div class="col-sm-8">
                  <label for="eigenkapital">Eigenkapital:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="eigenkapital" name="eigenkapital" min="0" required="true" oninput="update_einzelfallrechner()"> €
                </div>

                <div class="col-sm-8">
                  <label for="netto_kaufpreis">Netto Kaufpreis:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="netto_kaufpreis" name="netto_kaufpreis" min="0" required="true" oninput="update_einzelfallrechner()"> €
                </div>

                <div class="col-sm-8">
                  <label for="zusätzliche_modernisierungskosten">Zusätzliche Modernisierungskosten:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="zusätzliche_modernisierungskosten" name="zusätzliche_modernisierungskosten" min="0" oninput="update_einzelfallrechner()"> €
                </div>

                <div class="col-sm-8">
                  <label for="erwartete_jahreskaltsmiete">Erwartete Jahreskaltsmiete:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="erwartete_jahreskaltsmiete" name="erwartete_jahreskaltsmiete" min="0" required="true" oninput="update_einzelfallrechner()"> €
                </div>

                <div class="col-sm-8">
                  <label for="wohnfläche">Wohnfläche:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="wohnfläche" name="wohnfläche" min="0" required="true" oninput="update_einzelfallrechner()"> m<sup>2</sup>
                </div>

                <div class="col-sm-8">
                  <label for="baujahr">Baujahr:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="baujahr" name="baujahr" min="0" oninput="update_einzelfallrechner()">
                </div>

                <div class="col-sm-4">
                  <label for="laufende_kosten_pro_jahr">Laufende Kosten pro Jahr:</label>
                </div>
                <div class="col-sm-4">
                  <input type="checkbox" id="set_default_laufende_kosten_pro_jahr" name="set_default_laufende_kosten_pro_jahr" onchange="update_einzelfallrechner()">
                  <label for="set_default_laufende_kosten_pro_jahr">Automatisch füllen</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="laufende_kosten_pro_jahr" name="laufende_kosten_pro_jahr" min="0" oninput="update_einzelfallrechner()"> €
                </div>

                <div class="col-sm-8">
                    <label for="finanzierungsdauer_in_jahren">Finanzierungsdauer:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="finanzierungsdauer_in_jahren" name="finanzierungsdauer_in_jahren" min="0" max="50" oninput="update_einzelfallrechner()"> Jahre
                </div>

                <div class="col-sm-4">
                  <label for="sollzins">Sollzins:</label>
                </div>
                <div class="col-sm-4">
                  <input type="checkbox" id="set_default_sollzins" name="set_default_sollzins" onchange="update_einzelfallrechner()">
                  <label for="set_default_sollzins">Automatisch füllen</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="sollzins" name="sollzins" min="0" max="100" step="0.01" oninput="update_einzelfallrechner()"> %
                </div>

                <div class="col-sm-8">
                  <label for="tilgungsrate_pro_jahr">Tilgungsrate pro Jahr:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="tilgungsrate_pro_jahr" name="tilgungsrate_pro_jahr" min="0" max="100" oninput="update_einzelfallrechner()"> %
                </div>

                <div class="col-sm-8">
                  <label for="rücklagen_enthalten_in_kaufpreis">Rücklagen (Enthalten im Kaufpreis):</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="rücklagen_enthalten_in_kaufpreis" name="rücklagen_enthalten_in_kaufpreis" min="0" oninput="update_einzelfallrechner()"> €
                </div>

                <div class="col-sm-8">
                  <label for="zusätzliche_enthaltente_werte_in_kaufpreis">Zusätzlich enthaltene Werte im Kaufpreis:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="zusätzliche_enthaltente_werte_in_kaufpreis" name="zusätzliche_enthaltente_werte_in_kaufpreis" min="0" oninput="update_einzelfallrechner()"> €
                </div>

                <div class="col-sm-8">
                  <label for="maklercourtage">Maklercourtage:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="maklercourtage" name="maklercourtage" min="0" max="100" step="0.01" oninput="update_einzelfallrechner()"> % vom Kaufpreis
                </div>

                <div class="col-sm-8">
                  <label for="notarkosten">Notarkosten:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="notarkosten" name="notarkosten" min="0" max="100" step="0.01" oninput="update_einzelfallrechner()"> % vom Kaufpreis
                </div>

                <div class="col-sm-8">
                  <label for="grunderwerbssteuersatz">Grunderwerbssteuersatz:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="grunderwerbssteuersatz" name="grunderwerbssteuersatz" min="0" max="100" step="0.01" oninput="update_einzelfallrechner()"> % vom Kaufpreis
                </div>

                <div class="col-sm-4">
                  <label for="grund_und_bodenwert">Grund- und Bodenwert:</label>
                </div>
                <div class="col-sm-4">
                  <input type="checkbox" id="set_default_grund_und_bodenwert" name="set_default_grund_und_bodenwert" onchange="update_einzelfallrechner()">
                  <label for="set_default_grund_und_bodenwert">Automatisch füllen</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="grund_und_bodenwert" name="grund_und_bodenwert" min="0" oninput="update_einzelfallrechner()"> €
                </div>

                <div class="col-sm-8">
                  <label for="gewerblich_vermietet">Gewerbliche Vermietung:</label>
                </div>
                <div class="col-sm-4">
                  <input type="checkbox" id="gewerblich_vermietet" name="gewerblich_vermietet" onchange="update_einzelfallrechner()">
                </div>

                <div class="col-sm-8">
                  <label for="denkmalgeschützt">Denkmalgeschützt:</label>
                </div>
                <div class="col-sm-4">
                  <input type="checkbox" id="denkmalgeschützt" name="denkmalgeschützt" onchange="update_einzelfallrechner()">
                </div>

                <div class="col-sm-8">
                  <label for="einkommenssteuersatz">Einkommenssteuersatz:</label>
                </div>
                <div class="col-sm-4">
                  <input type="number" id="einkommenssteuersatz" name="einkommenssteuersatz" min="0" max="100" step="0.01" oninput="update_einzelfallrechner()"> %
                </div>

                <div class="col-sm-8">
                  <label for="erwerb_durch_vermögensverwaltende_körperschaft">Erwerb durch vermögensverwaltende Körperschaft (z.B. Stiftung):</label>
                </div>
                <div class="col-sm-4">
                  <input type="checkbox" id="erwerb_durch_vermögensverwaltende_körperschaft" name="erwerb_durch_vermögensverwaltende_körperschaft" onchange="update_einzelfallrechner()">
                </div>
              </div>
            </form>
            <button class="btn btn-primary" onclick="compute_einzelfall()" style="margin: 20px; margin-bottom: 30px">Start</button>

            <div class="mt-3 mb-3" id='einzelfallrechner_result' style="display:none; margin-bottom: 50px">

              <hr>

              <h3>Ergebnis</h3>
              <div id='einzelfallrechner_details' class="row">

                <div class="col-sm-4">
                  Cashflow p.a. absolut:
                </div>
                <div class="col-sm-2">
                  <div id='einzelfallrechner_rendite_pa_absolut'></div>
                </div>

                <div class="col-sm-4">
                  Cashflow p.a. relativ zu Investment:
                </div>
                <div class="col-sm-2">
                  <div id='einzelfallrechner_rendite_pa_relativ'></div>
                </div>

                <div class="col-sm-4">
                  Anschaffungspreis entspricht
                </div>
                <div class="col-sm-2">
                  <div id='einzelfallrechner_anschaffungspreis_in_jahreskaltmieten'></div>
                </div>

                <div class="col-sm-4">
                  Restschulden:
                </div>
                <div class="col-sm-2">
                  <div id='einzelfallrechner_restschulden'></div>
                </div>

                <div class="col-sm-4">
                  Gesamtanschaffungskosten:
                </div>
                <div class="col-sm-2">
                  <div id='einzelfallrechner_gesamtanschaffungskosten'></div>
                </div>

                <div class="container-fluid mt-5" >
                  <div class="table-responsive">
                    <table class='table table-dark table-striped table-bordered'>
                      <thead>
                        <tr>
                          <th>Jahr</th>
                          <th>V&V Einnahmen</th>
                          <th>Finanzierungskosten</th>
                          <th>Tilgungskosten</th>
                          <th>Zu versteuernder Überschuss</th>
                          <th>AfA</th>
                          <th>Steuerlicher Gewinn</th>
                          <th>Steuerabzug</th>
                          <th>Steuerersparnis aus Hauptberuflichkeit</th>
                          <th>Cashflow</th>
                        </tr>
                      </thead>
                      <tbody id="einzelfallrechner_verlauf"><!-- Filled dynammically--></div>
                      </tbody>
                    </table>
                  </div>
                </div>

              </div> <!-- einzelfallrechner_details -->
            </div> <!-- einzelfallrechner_result -->
          </div> <!-- einzelfallrechner -->

          <div id="darlehensrechner" class="container tab-pane"><br>
            <h3>Rückzahlverlauf eines Annuitätendarlehen</h3>
            <div id='darlehen_div' class="mx-auto d-block" style="max-width: 70vh;"><!-- Plotly chart will be drawn inside this DIV --></div>
          </div> <!-- darlehensrechner -->

          <div id="sollzinsverlauf" class="container tab-pane"><br>
            <h3>Geschätzte aktuelle Sollzinsen pro Eigenkapitalanteil </h3>
            <div id='zins_div' class="mx-auto d-block" style="max-width: 70vh;"><!-- Plotly chart will be drawn inside this DIV --></div>
          </div> <!-- sollzinsverlauf -->
        </div> <!-- tab-content -->
      </div> <!-- outer_content_container -->

    </div>
    <div class="mt-5 p-4 text-white text-center bg-secondary small" style="min-height: 15vh">
      <p>Alle hier getroffenen Annahmen und dargestellten Angaben gelten nur zur groben Orientierung. Es gibt keine Gewährleistung für inkorrekte oder fehlende Angaben.</p>
      <p>Copyright 2024 by Marvin Gerlach</p>
    </div>
  </body>
</html>
